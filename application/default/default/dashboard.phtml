      <!-- APP-CONTENT OPEN -->
      <div class="main-content app-content mt-0">
        <div class="side-app">
          <!-- CONTAINER -->
          <div class="main-container container-fluid">
            <!-- PAGE-HEADER -->
            <div class="page-header">
              <div>
                <h1 class="page-title">Dashboard</h1>
                <ol class="breadcrumb">
                  <li class="breadcrumb-item">
                    <a href="javascript:void(0);">Home</a>
                  </li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Dashboard
                  </li>
                </ol>
              </div>
              <div class="ms-auto pageheader-btn">
              
              <button type="button" class="btn btn-primary btn-icon text-white me-2">             
               <?=x(array('link'=>'erp_expense/expense/add','label'=>'<span class="text-white">
                    <i class="fe fe-plus"> Add Expense</i>
                  </span>',array("param"=>'class="facebox"')),'<br><br>')?></button>
              </div>
            </div>
            <!-- PAGE-HEADER END -->

            <!-- ROW-1 OPEN -->
            <div class="row">
              <div class="col-sm-12 col-md-6 col-lg-6 col-xl-3">
                <div class="card bg-primary img-card box-primary-shadow">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="text-white">
                        <h2 class="mb-0 number-font"><?=number_format($this->propertyData['total_amount'] ?? 0, 3); ?></h2>
                        <p class="text-white mb-0">Total Rent Due  <?=date('y-M', strtotime($this->propertyData['year_month'] ?? date('Y-m')));?></p>
                      </div>
                      <div class="ms-auto">
                        <i class="fa fa-bar-chart text-white fs-30 me-2 mt-2"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- COL END -->
              <div class="col-sm-12 col-md-6 col-lg-6 col-xl-3">
                <div class="card bg-secondary img-card box-secondary-shadow">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="text-white">
                        <h2 class="mb-0 number-font"><?=number_format($this->propertyData['paid_amount'] ?? 0, 3); ?></h2>
                        <p class="text-white mb-0">Total Rent Collection  <?=date('y-M', strtotime($this->propertyData['year_month'] ?? date('Y-m')));?></p>
                      </div>
                      <div class="ms-auto">
                        <i class="fa fa-bar-chart text-white fs-30 me-2 mt-2"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- COL END -->
              <div class="col-sm-12 col-md-6 col-lg-6 col-xl-3">
                <div class="card bg-success img-card box-success-shadow">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="text-white">
                        <h2 class="mb-0 number-font"><?=number_format($this->propertyData['total_collection'] ?? 0, 3); ?></h2>
                        <p class="text-white mb-0">Invoice Collection  <?=date('y-M', strtotime($this->propertyData['year_month'] ?? date('Y-m')));?></p>
                      </div>
                      <div class="ms-auto">
                        <i class="fa fa-bar-chart text-white fs-30 me-2 mt-2"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- COL END -->
              <div class="col-sm-12 col-md-6 col-lg-6 col-xl-3">
                <div class="card bg-info img-card box-info-shadow">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="text-white">
                        <h2 class="mb-0 number-font"><?=number_format($this->propertyData['total_expenditure'] ?? 0, 3); ?></h2>
                        <p class="text-white mb-0">Monthly Expense  <?=date('y-M', strtotime($this->propertyData['year_month'] ?? date('Y-m')));?></p>
                      </div>
                      <div class="ms-auto">
                        <i class="fa-solid fa-bar-chart text-white fs-30 me-2 mt-2"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- COL END -->
            </div>
            <!-- ROW-1 END -->

            <!-- ROW-2 OPEN -->
            <div class="row">
              <div class="col-sm-12 col-md-12 col-lg-12 col-xl-8">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">12 Months Transaction</h3>
                  </div>
                  <div class="card-body pb-0">
                    <div id="chartArea" class="chart-donut" style="min-height: 365px;width: 700px;"></div>
                  </div>
                </div>
              </div>
              <!-- COL END -->
              <div class="col-sm-12 col-md-12 col-lg-12 col-xl-4">
                <div class="card">
                  <div class="card-header text-center">
                    <h2 class="card-title">Projects</h2>
                  </div>
                  <div class="card-body">
                    <div class="mx-auto chart-circle chart-circle-md mt-3 mb-4 text-center" data-value="<?=number_format(min(max($this->propertyData['total_amount']  > 0 ? $this->propertyData['paid_amount'] / $this->propertyData['total_amount']  : 0, 0), 1), 2)?>"
                      data-thickness="8" data-bs-color="#5e2dd8 "> </div>
                    <div class="text-center mt-3">
                      <h3>Rent Progress</h3>
                      <p class="mb-4">
                        &nbsp;</br> &nbsp;</br> &nbsp;</br> &nbsp;</br> 
                      </p>
                      <div class="col p-1 mt-2">
                        <div class="float-start">
                          <h5 class="">
                            <i class="fa fa-caret-up fa-1x text-primary me-1"></i>OMR <?=number_format(($this->propertyData['total_amount']-$this->propertyData['paid_amount']) ?? 0, 3); ?>
                          </h5>
                          <h5 class="ms-5 pb-0 mb-0">Due Amount</h6>
                        </div>
                        <div class="float-end">
                          <h5 class="">
                            <i class="fa fa-caret-up fa-1x text-primary me-1"></i>OMR <?=number_format($this->propertyDataPre['total_amount'] ?? 0, 3); ?>
                          </h5>
                          <h5 class="me-5 mt-0 mb-0">Last Month</h6>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- COL END -->
            </div>
            <!-- ROW-2 END -->

            <!-- ROW-3 -->
            <div class="row">
              <div class="col-md-12 col-xl-4">
                <div class="card">
                  <div class="card-header border-bottom">
                    <h5 class="card-title">Sales Summary</h5>
                  </div>
                  <div class="card-body">
                    <div class="clearfix row mb-4">
                      <div class="col">
                        <div class="float-start">
                          <h5 class="mb-0"><strong>Total Revenue</strong></h5>
                          <small class="text-muted">weekly profit</small>
                        </div>
                      </div>
                      <div class="col">
                        <div class="float-end">
                          <h4 class="fw-bold mb-0 mt-2 text-blue">OMR 15300</h4>
                        </div>
                      </div>
                    </div>
                    <div class="clearfix row mb-4">
                      <div class="col">
                        <div class="float-start">
                          <h5 class="mb-0"><strong>Total Tax</strong></h5>
                          <small class="text-muted">weekly profit</small>
                        </div>
                      </div>
                      <div class="col">
                        <div class="float-end">
                          <h4 class="fw-bold mt-2 mb-0 text-success">
                            OMR 1625
                          </h4>
                        </div>
                      </div>
                    </div>
                    <div class="clearfix row mb-4">
                      <div class="col">
                        <div class="float-start">
                          <h5 class="mb-0"><strong>Total Income</strong></h5>
                          <small class="text-muted">weekly profit</small>
                        </div>
                      </div>
                      <div class="col">
                        <div class="float-end">
                          <h4 class="fw-bold mt-2 mb-0 text-warning">70%</h4>
                        </div>
                      </div>
                    </div>
                    <div class="clearfix row mb-4">
                      <div class="col">
                        <div class="float-start">
                          <h5 class="mb-0"><strong>Total Income</strong></h5>
                          <small class="text-muted">weekly profit</small>
                        </div>
                      </div>
                      <div class="col">
                        <div class="float-end">
                          <h4 class="fw-bold mt-2 mb-0 text-danger">50%</h4>
                        </div>
                      </div>
                    </div>
                    <div class="clearfix row mb-4">
                      <div class="col">
                        <div class="float-start">
                          <h5 class="mb-0"><strong>Total Loss</strong></h5>
                          <small class="text-muted">weekly profit</small>
                        </div>
                      </div>
                      <div class="col">
                        <div class="float-end">
                          <h4 class="fw-bold mt-2 mb-0 text-info">30%</h4>
                        </div>
                      </div>
                    </div>
                    <div class="clearfix row mb-0">
                      <div class="col">
                        <div class="float-start">
                          <h5 class="mb-0"><strong>Total Loss</strong></h5>
                          <small class="text-muted">weekly profit</small>
                        </div>
                      </div>
                      <div class="col">
                        <div class="float-end">
                          <h4 class="fw-bold mt-2 mb-0 text-secondary">
                            55%
                          </h4>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-8 col-md-12">
                <!-- <div class="col-sm-12 col-md-12 col-lg-12 col-xl-8"> -->
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Total Profit</h3>
                  </div>
                  <div class="card-body pb-0">
                    <div id="linechart" class="chart-donut"></div>
                  </div>
                </div>
                <!-- </div> -->
              </div>
            </div>
            <!-- COL END -->
            <!-- ROW-3 END -->
          </div>
          <!-- CONTAINER END -->
        </div>
      </div>
      <!-- APP-CONTENT END -->

<!--  <div>
	<div class="col-md-12">
		<h3 class="card-title" style="margin-left: 2%; margin-top: 5px;">Dashboard</h3>
	</div>
	<div class="col-md-12">
		<div class="col-md-4 btn_b_grd" id="barplot1"
			style=" width: 32.5%; height: 200px; margin-bottom: 20px; float: left; margin-right: .5%; margin-top: .7%;padding-top: 6px;"></div>
		<div class="col-md-4 btn_b_grd" id="barplot2"
			style=" width: 32.5%; height: 200px; margin-bottom: 20px; float: left; margin-right: .5%;margin-top: .7%;padding-top: 6px;"></div>
		<div class="col-md-4 btn_b_grd" id="barplot3"
			style=" width: 33%; height: 200px; margin-bottom: 20px; float: left;margin-top: .7%;padding-top: 6px;"></div>
		<div class="btn_b_grd" id="pcontainer" style="margin-bottom: 20px;width: 100% !important;"></div>		
	</div>
	<div class="col-md-6">
		<div class="btn_b_grd" id="ppcontainer" style="width: 100% !important; height: 350px; margin-bottom: 20px;"></div>
	</div>
	<div class="col-md-6">
		<div class="btn_b_grd" id="excontainer" style="width: 100% !important; height: 350px; margin-bottom: 20px;"></div>
	</div>
		
		<div class="" id="container"	style="min-width: 310px; height: 400px; margin: 0 auto"></div>
			
</div>
-->
<script>

baseurl = '<?=APPURL;?>';

// Assuming data is already in JavaScript variables
var paidAmount = JSON.parse('<?= json_encode($this->paidAmount); ?>');
var billCollection = JSON.parse('<?= json_encode($this->billCollection); ?>');
var totalExpenditure = JSON.parse('<?= json_encode($this->totalExpenditure); ?>');
var labels = JSON.parse('<?= json_encode($this->labels); ?>');

function chartArea() {
	  var maxAmount = Math.max(...paidAmount, ...billCollection, ...totalExpenditure) * 1.1;  // Get max value for Y-axis

	  var options = {
	    series: [
	      {
	        name: "Rent Collection",
	        type: "bar",
	        data: paidAmount, // Dynamically loading paidAmount data
	      },
	      {
	        name: "Bill Collection",
	        type: "bar",
	        data: billCollection, // Dynamically loading billCollection data
	      },
	      {
	        name: "Total Expenditure",
	        type: "line",
	        data: totalExpenditure, // Dynamically loading totalExpenditure data
	      },
	    ],
	    chart: {
	      height: 350,
	      type: "line",
	      stacked: true,
	    },
	    stroke: {
	      width: [0, 0, 3],
	      curve: "smooth",
	    },
	    plotOptions: {
	      bar: {
	        columnWidth: "60%",  // Increase the bar height by reducing the space between bars
	        stacked: true,
	      },
	    },
	    fill: {
	      opacity: [0.85, 0.85, 1],
	      gradient: {
	        shade: "light",
	        type: "vertical",
	        opacityFrom: 0.85,
	        opacityTo: 0.55,
	        stops: [0, 100],
	      },
	    },
	    labels: labels, // Dynamically using labels from JS variable
	    markers: {
	      size: 0,
	    },
	    xaxis: {
	      type: "category", // Ensure this is "category" instead of "datetime"
	      categories: labels, // Dynamically use the labels
	    },
	    yaxis: [
	      {
	        title: {
	          text: "Amount",
	        },
	        min: 0,
	        max: maxAmount,  // Set max Y-axis dynamically
	        tickAmount: 5,  // Adjust the number of ticks on the Y-axis
	      },
	    ],
	    tooltip: {
	      shared: true,
	      intersect: false,
	      y: {
	        formatter: function (y, { seriesIndex, dataPointIndex, w }) {
	          if (typeof y !== "undefined") {
	            return "RO " + y.toFixed(3);  // Ensure the value is formatted with two decimal places
	          }
	          return y;
	        },
	      },
	    },
	  };

	  // Clear the previous chart if it exists and render a new one
	  document.querySelector("#chartArea").innerHTML = "";
	  var chart = new ApexCharts(document.querySelector("#chartArea"), options);
	  chart.render();
	}
  


/*$(function () {
    $('#container').highcharts({
        title: {
            text: 'Progress chart'
        },
        xAxis: {
            categories: ['Constuction', 'Rental', 'Trucks', 'Trailors', 'Utilities']
        },
        credits: {
        	enabled: false,
            
            //text: 'www.creativesol.com',
            //href: 'http://www.creativesol.com'
          },
        labels: {
            items: [{
                html: 'Total',
                style: {
                    left: '50px',
                    top: '18px',
                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'black'
                }
            }]
        },
        series: [{
            type: 'column',
            name: 'Salary',
            data: [3, 2, 1, 3, 4]
        }, {
            type: 'column',
            name: 'Maintenence',
            data: [2, 3, 5, 7, 6]
        }, {
            type: 'column',
            name: 'Profit',
            data: [4, 3, 3, 9, 0]
        }, {
            type: 'spline',
            name: 'Average',
            data: [3, 2.67, 3, 6.33, 3.33],
            marker: {
                lineWidth: 2,
                lineColor: Highcharts.getOptions().colors[3],
                fillColor: 'white'
            }
        }, {
            type: 'pie',
            name: 'Total',
            data: [{
                name: 'Salary',
                y: 13,
                color: Highcharts.getOptions().colors[0] // Jane's color
            }, {
                name: 'Maintenence',
                y: 23,
                color: Highcharts.getOptions().colors[1] // John's color
            }, {
                name: 'Profit',
                y: 19,
                color: Highcharts.getOptions().colors[2] // Joe's color
            }],
            center: [100, 80],
            size: 100,
            showInLegend: false,
            dataLabels: {
                enabled: false
            }
        }]
    });
});*/
<?
/*
var link = {
<?foreach ($this->link as $lky=> $lval):?>
	<?="$lky:'$lval',"?>
<?endforeach;?>
};


$(document).ready(function(){
	$(function () {
		var chart1 = $(function () {
		    $('#barplot1').highcharts({
		    	colors: ['#cd4410','blue','#004040'],
		    	legend: {
		            enabled: false
		        },
		    	chart: {
		            type: 'column',
		            //height :200,
			    	backgroundColor: 'rgba(0,0,0,0)',
			        spacingTop:15,
			        spacingRight:30
		        },
		        credits: {
		            text: '',
		            href: 'http://www.creativesol.com'
		        },
		        title: {
		            text: 'Employee Documets Expiry'
		        },
		        xAxis: {
		            categories: [<?foreach($this->expList as $expk=>$expval):?>
				            		'<?=$expk?>',
									<?php endforeach?>],
	            ref: [<?foreach($this->expList as $expk=>$expval):?>
            		'<?=$expk?>',
				<?php endforeach?>]
		        },
		        yAxis: {
		            min:0,
		            //max:76,
		            title: {
		                text: 'Count'
		            }
		        },
		        tooltip: {
		            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',
		            shared: true
		        },
		        
		        plotOptions: {
		        	allowPointSelect: true,
		            column: {
		                stacking: 'number',
		            },
		            series: {
		                cursor: 'pointer',
		                point: {
		                    events: {
		                        click: function () {
		                        	getOpener ('wide',baseurl+'erp_report/employee/empdocument/ref/'+link[this.category]);
		                        	  
		                        }
		                    }
		                },
		                maxPointWidth: 35
		            }
		        },
		        series: [{
		            name: 'Passport',
		            data: [<?foreach($this->expList as $pp):?>
		            		<?=$pp['passport']?>,
							<?php endforeach?>],		
		        }, {
		            name: 'Visa',
		            data: [<?foreach($this->expList as $visa):?>
		            		<?=$visa['visa']?>,
							<?php endforeach?>],		
		        }, {
		            name: 'Resident Card',
		            data: [<?foreach($this->expList as $id):?>
		            		<?=$id['id']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'Lisence',
		            data: [<?foreach($this->expList as $lic):?>
		            		<?=$lic['license']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'Insurance',
		            data: [<?foreach($this->expList as $ins):?>
		            		<?=$ins['insurance']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'PDO Lisence',
		            data: [<?foreach($this->expList as $pdolic):?>
		            		<?=$pdolic['pdolicense']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'PDO Passport',
		            data: [<?foreach($this->expList as $pdopp):?>
		            		<?=$pdopp['pdopassport']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'H2S Card',
		            data: [<?foreach($this->expList as $h2s):?>
		            		<?=$h2s['h2scard']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'OXY Passport',
		            data: [<?foreach($this->expList as $oxypass):?>
		            		<?=$oxypass['oxypassport']?>, 
							<?php endforeach?>],
					
		        },{
		            name: 'OXY License',
		            data: [<?foreach($this->expList as $oxylic):?>
		            		<?=$oxylic['oxylicense']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'OXY H2S',
		            data: [<?foreach($this->expList as $oxyh2s):?>
		            		<?=$oxyh2s['oxyh2s']?>,
							<?php endforeach?>],
					
		        },
		        {
		            name: 'Work Contract',
		            data: [<?foreach($this->expList as $workContract):?>
		            		<?=$workContract['workContract']?>,
							<?php endforeach?>],
					
		        }]
		    });
		});


		var chart2 = $(function () {
		    $('#barplot2').highcharts({
		    	colors: ['#c73ae4','#cd4410','#004040'],
		    	legend: {
		            enabled: false
		        },
		    	chart: {
		            type: 'column',
		            //height :200,
		            backgroundColor: 'rgba(0,0,0,0)',
		            spacingTop:15,
		            spacingRight:30
		        },
		        credits: {
		            text: '',
		            href: 'http://www.creativesol.com'
		        },
		        title: {
		            text: 'Property Documets Expiry'
		        },
		        xAxis: {
		            categories: [<?foreach($this->propExpList as $expk=>$expval):?>
				            		'<?=$expk?>',
									<?php endforeach?>],
	            ref: [<?foreach($this->expList as $expk=>$expval):?>
            		'<?=$expk?>',
				<?php endforeach?>]
		        },
		        yAxis: {
		            min:0,
		            //max:76,
		            title: {
		                text: 'Count'
		            }
		        },
		        tooltip: {
		            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',
		            shared: true
		        },
		        
		        plotOptions: {
		        	allowPointSelect: true,
		            column: {
		                stacking: 'number',
		            },
		            series: {
		                cursor: 'pointer',
		                point: {
		                    events: {
		                        click: function () {
		                        	getOpener ('wide',baseurl+'erp_report/property/propdocument/ref/'+link[this.category]);
		                        	  
		                        }
		                    }
		                },
		                maxPointWidth: 35
		            }
		        },
		        series: [{
		            name: 'Agreement',
		            data: [<?foreach($this->propExpList as $agr):?>
		            		<?=$agr['Agreement']?>,
							<?php endforeach?>],		
		        },{
		            name: 'Fire',
		            data: [<?foreach($this->propExpList as $fire):?>
		            		<?=$fire['Fire']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'Insurance',
		            data: [<?foreach($this->propExpList as $bins):?>
		            		<?=$fire['Insurance']?>,
							<?php endforeach?>],
					
		        }]
		    });
		});

		var chart3 = $(function () {
		    $('#barplot3').highcharts({
		    	colors: ['#cd4410','blue','#004040'],
		    	legend: {
		            enabled: false
		        },
		    	chart: {
		            type: 'column',
		            //height :200,
		            backgroundColor: 'rgba(0,0,0,0)',
		            spacingTop:15,
		            spacingRight:30
		        },
		        credits: {
		            text: '',
		            href: 'http://www.creativesol.com'
		        },
		        title: {
		            text: 'Vehicle Documets Expiry'
		        },
		        xAxis: {
		            categories: [<?foreach($this->VehExpList as $expk=>$expval):?>
				            		'<?=$expk?>',
									<?php endforeach?>],
	            ref: [<?foreach($this->VehExpList as $expk=>$expval):?>
            		'<?=$expk?>',
				<?php endforeach?>]
		        },
		        yAxis: {
		            min:0,
		            //max:76,
		            title: {
		                text: 'Count'
		            }
		        },
		        tooltip: {
		            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',
		            shared: true
		        },
		        
		        plotOptions: {
		        	allowPointSelect: true,
		            column: {
		                stacking: 'number',
		            },
		            series: {
		                cursor: 'pointer',
		                point: {
		                    events: {
		                        click: function () {
		                        	getOpener ('wide',baseurl+'erp_report/vehicle/vhldocument/ref/'+link[this.category]);
		                        	  
		                        }
		                    }
		                },
		                maxPointWidth: 35
		            }
		        },
		        series: [{
		            name: 'Mulkia',
		            data: [<?foreach($this->VehExpList as $mulk):?>
		            		<?=$mulk['Mulkia']?>,
							<?php endforeach?>],		
		        }, {
		            name: 'PDO',
		            data: [<?foreach($this->VehExpList as $pdo):?>
		            		<?=$pdo['PDO']?>,
							<?php endforeach?>],		
		        }, {
		            name: 'Fitness',
		            data: [<?foreach($this->VehExpList as $fit):?>
		            		<?=$fit['Fitness']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'IVMS',
		            data: [<?foreach($this->VehExpList as $ivms):?>
		            		<?=$ivms['IVMS']?>,
							<?php endforeach?>],
					
		        },
		        {
		            name: 'Insurance',
		            data: [<?foreach($this->VehExpList as $vins):?>
		            		<?=$vins['Insurance']?>,
							<?php endforeach?>],
					
		        },{
		            name: 'Mun.Certificate',
		            data: [<?foreach($this->VehExpList as $mns):?>
		            		<?=$mns['Mun.Certificate']?>,
							<?php endforeach?>],
					
		        }]
		    });
		});
	});
});


Highcharts.chart('pcontainer', {
	colors: ['#cd4410','green'],
    chart: {
        type: 'column',
        height: 300,
        backgroundColor: 'rgba(0,0,0,0)',
        spacingTop:15,
        spacingRight:30
    },
    credits: {
        text: '',
        href: ''
    },

    title: {
        text: 'Shops and Flats Occupancy by Building'
    },

    xAxis: {
        categories: [<?php foreach ($this->bldname as $data):
 						echo "'".$data."',"; endforeach;?>
	 		]
    },

    yAxis: {
        allowDecimals: false,
        min: 0,

        title: {
            text: 'Number of Properties'
        }
    },

    tooltip: {
        formatter: function () {
            //console.log(this.series);
            return '<b>' + this.x + '</b><br/>' +
                this.series.name + ': ' + this.y + '<br/>' +
                'Total: ' + this.point.Total;
        }
    },

    plotOptions: {
        column: {
            stacking: 'normal',
            
        },
	    series: {
		      	events: {
		        	legendItemClick: function(event) {
		            	var s = this.chart.series;
		                for(i = 0; i < s.length; i++) {
		                	if(this.name == 'Show All' || this == s[i])
		                    	s[i].setVisible(true);
		                    else
		                    	s[i].setVisible(false);
		                }
		            	return false;
		            }
		        }
		    }
    },
    
    series: [{
        name: 'Shops-Vacant',
        color: '#cd4410',
        data: [<?php foreach ($this->param as $data):?>
        {y:<?php echo $data['shop']['vacant'].",Total:".$data['shop_t']."},"; endforeach;?>],
        stack: 'male'
    }, {

        name: 'Shop-agreement',
        color: 'green',
        data: [<?php foreach ($this->param as $data):?>
        {y:<?php echo $data['shop']['agreement'].",Total:".$data['shop_t']."},"; endforeach;?>],
        stack: 'male'
    }, {
        name: 'Flats-Vacant',
        color: '#c73ae4',
        data: [<?php foreach ($this->param as $data):?>
        {y:<?php echo $data['flat']['vacant'].",Total:".$data['flat_t']."},"; endforeach;?>],
        stack: 'female'
    }, {

        name: 'Flat-agreement',
        color: '#56baf8',
        data: [<?php foreach ($this->param as $data):?>
        {y:<?php echo $data['flat']['agreement'].",Total:".$data['flat_t']."},"; endforeach;?>],
        stack: 'female',
    },{ name: 'Show All' 
    }]
});
</script>

<?php 
require_once __DIR__ . '/../../admin/!model/expense.php';
$expObj = new expense();
$where = array(
		'f_mode'=>3,
);
$expenseSummery = $expObj->geExpenseReportSummaryPlot();
unset($expenseSummery['ven']);
$i = 0;
$prefix = '';
$total = $expenseSummery['total']['0']['sum']+$expenseSummery['total']['1']['sum'];
foreach ( $expenseSummery as $key => $section ) :
	foreach ( $section as $sub ) :
	$repeat.= "{
			name: '".$sub ['label_name']."',
			turboThreshold: 0,
			data: [".$prefix.(round($sub ['sum']/$total*100,2))."]
		},";
	endforeach;
	$prefix.= "'',";
endforeach;
?>
<script>
Highcharts.chart('excontainer', {

	title: {
	    text: 'Expense Summary in <b>%</b>'
	  },
	  exporting: {},
	  chart: {
	    type: 'bar',
	    backgroundColor: 'rgba(0,0,0,0)',
        spacingTop:15,
        spacingRight:30
	  },
	  xAxis: {
	    categories: ['Comp','Head','Category','Mode'],
	  },
	    credits: {
	        text: '',
	        href: ''
	    },

	   tooltip: {
	        formatter: function () {
	            return  this.x + '<br/>' + '<b>' + this.series.name + ': ' + this.y + '</b> %';
	        }
	    },
	  
	  yAxis: {
	    min: 0,
	    title: {
	      'text': ''
	    },
	    max: 100
	  },
	  
	  legend: {
	    reversed: false
	  },
	  plotOptions: {
		    series: {
			   	  stacking: 'normal',
			      animation: true,
			      	events: {
			        	legendItemClick: function(event) {
			            	var s = this.chart.series;
			                for(i = 0; i < s.length; i++) {
			                	if(this.name == 'Show All' || this == s[i])
			                    	s[i].setVisible(true);
			                    else
			                    	s[i].setVisible(false);
			                }
			            	return false;
			            }
			        }
			    }
	  },

	  series: [ <?=$repeat?>{ name: 'Show All' 
      } ]
	});
</script>
<?php 
$expenseSummery = $expObj->geExpenseReportSummaryPlotCredit($where);
$i = 0;
$prefix = '';
$repeat = '';
$total = $expenseSummery['total']['0']['sum']+$expenseSummery['total']['1']['sum'];
foreach ( $expenseSummery as $key => $section ) :
foreach ( $section as $sub ) :
$repeat.= "{
			name: '".$sub ['label_name']."',
			turboThreshold: 0,
			data: [".$prefix.$sub ['sum']."]
		},";
endforeach;
$prefix.= "'',";
endforeach;
?>
<script>
Highcharts.chart('ppcontainer', {

	title: {
	    text: 'Pending Credit Payment Details'
	  },
	  exporting: {},
	  chart: {
	    type: 'bar',
	    backgroundColor: 'rgba(0,0,0,0)',
        spacingTop:15,
        spacingRight:30
	  },
	  xAxis: {
	    categories: ['Vendor','Credit'],
	  },
	    credits: {
	        text: '',
	        href: ''
	    },

	   tooltip: {
	        formatter: function () {
	            return  this.x + '<br/>' + '' + this.series.name + ': RO <b>' + this.y + '</b>';
	        }
	    },
	  
	  yAxis: {
	    min: 0,
	    title: {
	      'text': ''
	    },
	    max :<?=$total;?>,
	  },
	  
	  legend: {
	    reversed: false
	  },
	  plotOptions: {
	    series: {
	   	  stacking: 'normal',
	      animation: true,
	      	events: {
	        	legendItemClick: function(event) {
	            	var s = this.chart.series;
	                for(i = 0; i < s.length; i++) {
	                	if(this.name == 'Show All' || this == s[i])
	                    	s[i].setVisible(true);
	                    else
	                    	s[i].setVisible(false);
	                }
	            	return false;
	            }
	        }
	    }
	  },

	  series: [ <?=$repeat?>
				{ name: 'Show All' 
			      } ]
	});

*/?>

<?php  if(USER_GROUP<>99):?>
$(document).ready(function($) {
	getContent(baseurl+'default/default/notify');
});	
<?php endif; ?>
</script>